@using Sandbox.UI;

@namespace GameJam
@inherits Panel

<style>
    ResourcePanel { 
        position: relative;
        background-color: #2c2825cc;
        box-shadow: 0px 0px 45px #00000096;
        margin: 5px;
        transform: rotate(3deg);
        width: 96px;
        height: 96px;
        backdrop-filter: blur(8px);
    }
    span {
        font-family: Roboto;
        font-weight: 900;
        font-size: 42px;
        text-shadow: 4px 4px 0px black;
        position: absolute;
        bottom: -25px;
        right: 5px;
        transform: rotate(-3deg);
    }
    /* Why the fuck transform: translate(-50%, -50%) is not a thing */
    img {
        position: absolute;
        top: 9%;
        left: 9%;
        width: 78px;
        height: 78px;
        transform: rotate(-3deg);
    }
</style>

<root>
    <img src=@($"ui/resources/{ResourceName.ToLower()}.png") />
    <span>@ResourceAmount</span>
</root>

@code {
    public string ResourceName { get; set; }

    public DateTime LastUpdate { get; private set; } = DateTime.Now;
    public int ResourceAmount { get; set; }

    public void OnValueChange(int newValue)
    {
        ResourceAmount = newValue;
        LastUpdate = DateTime.Now;
    }

    protected override int BuildHash()
    {
        return HashCode.Combine(LastUpdate);
    }
}
