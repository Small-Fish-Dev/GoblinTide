@using Sandbox.UI;

@namespace GameJam
@inherits Panel

<root>
    <ResourcePanel @ref=EnergyPanel ResourceName="Energy" ResourceAmount=@((int)GameMgr.TotalEnergy)></ResourcePanel>
    <ResourcePanel @ref=ArmyPanel ResourceName="Goblin" ResourceAmount=@GameMgr.MaxArmySize></ResourcePanel>
    <ResourcePanel @ref=WoodPanel ResourceName="Wood" ResourceAmount=@GameMgr.TotalWood></ResourcePanel>
    <ResourcePanel @ref=GoldPanel ResourceName="Gold" ResourceAmount=@GameMgr.TotalGold></ResourcePanel>
    <ResourcePanel @ref=FoodPanel ResourceName="Food" ResourceAmount=@GameMgr.TotalFood></ResourcePanel>
    <ResourcePanel @ref=WomenPanel ResourceName="Women" ResourceAmount=@GameMgr.TotalWomen></ResourcePanel>
</root>

<style>
    Resources {
        position: absolute;
        top: 30px;
        right: 30px;

        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;

		ResourcePanel {
			margin-right: 16px;
		}
        
        transition: all .3s ease-in-out;

        &:intro {
            transform: scale(0.5);
            opacity: 0;
        }
    }
</style>

@code {
    public ResourcePanel EnergyPanel { get; set; }
    public ResourcePanel ArmyPanel { get; set; }
    public ResourcePanel WoodPanel { get; set; }
    public ResourcePanel GoldPanel { get; set; }
    public ResourcePanel FoodPanel { get; set; }
    public ResourcePanel WomenPanel { get; set; }

    [Event("resources.energy")]
    void OnEnergy(int newAmount) => EnergyPanel.OnValueChange(newAmount);

    [Event("resources.army")]
    void OnArmy(int newAmount) => ArmyPanel.OnValueChange(newAmount);

    [Event("resources.wood")]
    void OnWood(int newAmount) => WoodPanel.OnValueChange(newAmount);

    [Event("resources.gold")]
    void OnGold(int newAmount) => GoldPanel.OnValueChange(newAmount);

    [Event("resources.food")]
    void OnFood(int newAmount) => FoodPanel.OnValueChange(newAmount);

    [Event("resources.women")]
    void OnWomen(int newAmount) => WomenPanel.OnValueChange(newAmount);
}
