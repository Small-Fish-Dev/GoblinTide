@using Sandbox.UI;
@namespace GameJam.UI
@inherits Panel

<style>
	MapActor {
		position: relative;
	}
</style>

@code {

	private Vector2? _position;

	internal Vector2 DragOffset;

	public Vector2 Position
	{
		get
		{
			_position ??= GetInitialPosition();
			return _position.Value;
		}

		set
		{
			_position = value;

			Style.Left = Length.Pixels( value.x );
			Style.Top = Length.Pixels( value.y );

			StateHasChanged();
		}
	}

	private Vector2 GetInitialPosition() => new Vector2
	{
		x = Style.Left?.GetPixels( Parent.Box.Rect.Width ) ?? 0,
		y = Style.Top?.GetPixels( Parent.Box.Rect.Height ) ?? 0
	} + ModifyInitialPosition();

	protected virtual Vector2 ModifyInitialPosition() => Vector2.Zero;

}
