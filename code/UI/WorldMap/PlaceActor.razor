@using GameJam.UI.Core
@using Sandbox.UI;

@namespace GameJam.UI
@inherits Actor
@attribute [StyleSheet( "/UI/WorldMap/PlaceActor.scss" )]

<root>
	@if ( Node.Size > 50 )
	{
		<AnimatedImage
			class="castle"
			delay="1"
			path="textures/tests/castle">
		</AnimatedImage>
	}
	else if ( Node.Size > 25 )
	{
		<AnimatedImage
			class="town"
			delay="1"
			path="textures/tests/town">
		</AnimatedImage>
	}
	else
	{
		<AnimatedImage
			class="camp"
			delay="0.8"
			path="textures/tests/camp">
		</AnimatedImage>
	}
</root>

@code {

	private WorldMapHost.Node Node { get; }

	public PlaceActor( WorldMapHost.Node node )
	{
		Node = node;
	}

	protected override Vector2 ModifyInitialPosition( Vector2 position ) => position + Node.MapPosition;

	protected override void OnClick( MousePanelEvent e )
	{
		base.OnClick( e );

		WorldMapHost.RequestServerGenerate( Node );
	}

}
